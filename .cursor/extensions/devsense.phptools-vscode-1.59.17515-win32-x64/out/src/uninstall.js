var l=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var w=l((H,_)=>{"use strict";var v=require("fs"),h;function I(){try{return v.statSync("/.dockerenv"),!0}catch{return!1}}function L(){try{return v.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}_.exports=()=>(h===void 0&&(h=I()||L()),h)});var F=l((J,y)=>{"use strict";var z=require("os"),B=require("fs"),S=w(),C=()=>{if(process.platform!=="linux")return!1;if(z.release().toLowerCase().includes("microsoft"))return!S();try{return B.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!S():!1}catch{return!1}};process.env.__IS_WSL_TEST__?y.exports=C:y.exports=C()});var O=l((Q,q)=>{"use strict";q.exports=(e,r,t)=>{let o=n=>Object.defineProperty(e,r,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let n=t();return o(n),n},set(n){o(n)}}),e}});var D=l((U,M)=>{var X=require("path"),j=require("child_process"),{promises:d,constants:T}=require("fs"),p=F(),G=w(),P=O(),$=X.join(__dirname,"xdg-open"),{platform:a,arch:k}=process,K=()=>{try{return d.statSync("/run/.containerenv"),!0}catch{return!1}},x;function N(){return x===void 0&&(x=K()||G()),x}var R=(()=>{let e="/mnt/",r;return async function(){if(r)return r;let t="/etc/wsl.conf",o=!1;try{await d.access(t,T.F_OK),o=!0}catch{}if(!o)return e;let n=await d.readFile(t,{encoding:"utf8"}),c=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return c?(r=c.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),b=async(e,r)=>{let t;for(let o of e)try{return await r(o)}catch(n){t=n}throw t},m=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return b(e.app,i=>m({...e,app:i}));let{name:r,arguments:t=[]}=e.app||{};if(t=[...t],Array.isArray(r))return b(r,i=>m({...e,app:{name:i,arguments:t}}));let o,n=[],c={};if(a==="darwin")o="open",e.wait&&n.push("--wait-apps"),e.background&&n.push("--background"),e.newInstance&&n.push("--new"),r&&n.push("-a",r);else if(a==="win32"||p&&!N()&&!r){let i=await R();o=p?`${i}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,n.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),p||(c.windowsVerbatimArguments=!0);let s=["Start"];e.wait&&s.push("-Wait"),r?(s.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&t.unshift(e.target)):e.target&&s.push(`"${e.target}"`),t.length>0&&(t=t.map(f=>`"\`"${f}\`""`),s.push(t.join(","))),e.target=Buffer.from(s.join(" "),"utf16le").toString("base64")}else{if(r)o=r;else{let i=!__dirname||__dirname==="/",s=!1;try{await d.access($,T.X_OK),s=!0}catch{}o=process.versions.electron||a==="android"||i||!s?"xdg-open":$}t.length>0&&n.push(...t),e.wait||(c.stdio="ignore",c.detached=!0)}e.target&&n.push(e.target),a==="darwin"&&t.length>0&&n.push("--args",...t);let u=j.spawn(o,n,c);return e.wait?new Promise((i,s)=>{u.once("error",s),u.once("close",f=>{if(!e.allowNonzeroExitCode&&f>0){s(new Error(`Exited with code ${f}`));return}i(u)})}):(u.unref(),u)},A=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return m({...r,target:e})},V=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=r||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return m({...r,app:{name:e,arguments:t}})};function W(e){if(typeof e=="string"||Array.isArray(e))return e;let{[k]:r}=e;if(!r)throw new Error(`${k} is not supported`);return r}function E({[a]:e},{wsl:r}){if(r&&p)return W(r);if(!e)throw new Error(`${a} is not supported`);return W(e)}var g={};P(g,"chrome",()=>E({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));P(g,"firefox",()=>E({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));P(g,"edge",()=>E({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));A.apps=g;A.openApp=V;M.exports=A});try{let e=require(`${__filename}/../../server/version.json`);e.version&&D()(`https://www.devsense.com/uninstall?from=vscode&platform=${e.target}&version=${e.version}`)}catch(e){}
